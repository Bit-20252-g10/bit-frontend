<!-- dashboard.html -->
<div class="max-w-6xl mx-auto p-6">
  <!-- Mensajes -->
  <div *ngIf="error" class="bg-red-100 text-red-800 p-3 rounded mb-4">
    {{ error }}
  </div>
  <div *ngIf="successMessage" class="bg-green-100 text-green-800 p-3 rounded mb-4">
    {{ successMessage }}
  </div>

  <!-- Sección de Juegos -->
  <div class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Panel de Control</h2>

    <!-- Botón alternar formulario -->
    <button (click)="showAddForm = !showAddForm"
            class="mb-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
      {{ showAddForm ? 'Cancelar' : 'Agregar Producto' }}
    </button>

    <!-- Lista de Juegos -->
    <div *ngIf="games.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
      <div *ngFor="let game of games; let i = index" class="bg-white rounded-lg shadow-md p-4">
        <div class="mb-3">
          <img *ngIf="game.imageUrl" [src]="game.imageUrl" [alt]="game.name" class="w-full h-48 object-cover rounded">
          <div *ngIf="!game.imageUrl" class="w-full h-48 bg-gray-200 rounded flex items-center justify-center">
            <span class="text-gray-500">Sin imagen</span>
          </div>
        </div>
        <h3 class="font-semibold text-lg mb-2">{{ game.name }}</h3>
        <p class="text-gray-600 mb-2">{{ game.descripcion || 'Sin descripción' }}</p>
        <p class="text-green-600 font-bold mb-2">{{ game.precio | currency }}</p>
        <p class="text-sm mb-2">
          Stock: <span [class]="getStockClass(game.stock)">{{ game.stock }}</span>
        </p>
        <p class="text-sm text-gray-500 mb-3">Consola: {{ game.consola || 'N/A' }}</p>
        
        <div class="flex space-x-2">
          <button (click)="startEdit(i)" class="px-3 py-1 bg-yellow-500 text-white rounded text-sm">
            Editar
          </button>
          <button (click)="deleteGame(game, i)" class="px-3 py-1 bg-red-500 text-white rounded text-sm">
            Eliminar
          </button>
        </div>
      </div>
    </div>

    <div *ngIf="games.length === 0 && !isLoading" class="text-center py-8 text-gray-500">
      No hay juegos disponibles
    </div>

    <!-- Formulario de agregar juego -->
    <form *ngIf="showAddForm" (ngSubmit)="addGame()" #gameForm="ngForm" class="space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block font-semibold">Nombre</label>
        <input name="name" [(ngModel)]="newGame.name" required
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Consola</label>
        <input name="consola" [(ngModel)]="newGame.consola"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Género</label>
        <input name="genero" [(ngModel)]="newGame.genero"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Año de Lanzamiento</label>
        <input type="number" name="releaseYear" [(ngModel)]="newGame.releaseYear"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Precio</label>
        <input type="number" name="precio" [(ngModel)]="newGame.precio" required min="0"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Stock</label>
        <input type="number" name="stock" [(ngModel)]="newGame.stock" required min="0"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Calificación (0-5)</label>
        <input type="number" name="rating" [(ngModel)]="newGame.rating" min="0" max="5"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Multijugador</label>
        <input type="checkbox" name="multiplayer" [(ngModel)]="newGame.multiplayer"
               class="mr-2" />
        Sí
      </div>

      <div>
        <label class="block font-semibold">Desarrollador</label>
        <input name="developer" [(ngModel)]="newGame.developer"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Distribuidor</label>
        <input name="publisher" [(ngModel)]="newGame.publisher"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div class="md:col-span-2">
        <label class="block font-semibold">Descripción</label>
        <textarea name="descripcion" [(ngModel)]="newGame.descripcion"
                  class="w-full border border-gray-300 px-3 py-2 rounded" rows="3"></textarea>
      </div>

      <div class="md:col-span-2">
        <label class="block font-semibold">Imagen del Juego</label>
        <input type="file" (change)="onFileSelected($event)"
               accept="image/*"
               class="w-full" />
      </div>
    </div>

    <button type="submit" [disabled]="!gameForm.form.valid || isUploading"
            class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 transition">
      {{ isUploading ? 'Subiendo imagen...' : 'Guardar Juego' }}
    </button>
  </form>
</div>
<!-- Formulario de agregar consola (dashboard.html) -->
<div class="max-w-4xl mx-auto p-6">
  <!-- Alternar formulario -->
  <!-- <button (click)="showAddConsoleForm = !showAddConsoleForm"
          class="mb-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition">
    {{ showAddConsoleForm ? 'Cancelar' : 'Agregar Consola' }}
  </button> -->

  <!-- Formulario Consola -->
  <form *ngIf="showAddConsoleForm" (ngSubmit)="addConsole()" #consoleForm="ngForm" class="space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block font-semibold">Nombre</label>
        <input name="name" [(ngModel)]="newConsole.name" required
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Marca</label>
        <input name="brand" [(ngModel)]="newConsole.brand"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Modelo</label>
        <input name="model" [(ngModel)]="newConsole.model"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Año de Lanzamiento</label>
        <input type="number" name="releaseYear" [(ngModel)]="newConsole.releaseYear"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Precio</label>
        <input type="number" name="price" [(ngModel)]="newConsole.price" required min="0"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Stock</label>
        <input type="number" name="stock" [(ngModel)]="newConsole.stock" required min="0"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Color</label>
        <input name="color" [(ngModel)]="newConsole.color"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div class="md:col-span-2">
        <label class="block font-semibold">Características</label>
        <textarea name="features" [(ngModel)]="newConsole.features"
                  class="w-full border border-gray-300 px-3 py-2 rounded" rows="3"></textarea>
      </div>

      <div class="md:col-span-2">
        <label class="block font-semibold">Descripción</label>
        <textarea name="description" [(ngModel)]="newConsole.description"
                  class="w-full border border-gray-300 px-3 py-2 rounded" rows="3"></textarea>
      </div>

      <div class="md:col-span-2">
        <label class="block font-semibold">Imagen</label>
        <input type="file" (change)="onConsoleImageSelected($event)"
               accept="image/*"
               class="w-full" />
      </div>
    </div>

    <button type="submit" [disabled]="!consoleForm.form.valid || isUploading"
            class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 transition">
      {{ isUploading ? 'Subiendo imagen...' : 'Guardar Consola' }}
    </button>
  </form>
</div>
<!-- Sección agregar accesorio -->
<div class="max-w-4xl mx-auto p-6">
  <!-- Botón mostrar/ocultar formulario -->
  <!-- <button (click)="showAddAccessoryForm = !showAddAccessoryForm"
          class="mb-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition">
    {{ showAddAccessoryForm ? 'Cancelar' : 'Agregar Accesorio' }}
  </button> -->

  <!-- Formulario accesorio -->
  <form *ngIf="showAddAccessoryForm" (ngSubmit)="addAccessory()" #accessoryForm="ngForm" class="space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block font-semibold">Nombre</label>
        <input name="name" [(ngModel)]="newAccessory.name" required
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Marca</label>
        <input name="brand" [(ngModel)]="newAccessory.brand"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Categoría</label>
        <input name="category" [(ngModel)]="newAccessory.category"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Precio</label>
        <input type="number" name="price" [(ngModel)]="newAccessory.price" required min="0"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div>
        <label class="block font-semibold">Stock</label>
        <input type="number" name="stock" [(ngModel)]="newAccessory.stock" required min="0"
               class="w-full border border-gray-300 px-3 py-2 rounded" />
      </div>

      <div class="md:col-span-2">
        <label class="block font-semibold">Descripción</label>
        <textarea name="description" [(ngModel)]="newAccessory.description"
                  class="w-full border border-gray-300 px-3 py-2 rounded" rows="3"></textarea>
      </div>

      <div class="md:col-span-2">
        <label class="block font-semibold">Imagen</label>
        <input type="file" (change)="onAccessoryImageSelected($event)"
               accept="image/*"
               class="w-full" />
      </div>
    </div>

    <button type="submit" [disabled]="!accessoryForm.form.valid || isUploading"
            class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 transition">
      {{ isUploading ? 'Subiendo imagen...' : 'Guardar Accesorio' }}
    </button>
  </form>
</div>

  <!-- Sección de Consolas -->
  <!-- <div class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Consolas</h2> -->
    
    <!-- Botón alternar formulario -->
    <!-- <button (click)="showAddConsoleForm = !showAddConsoleForm"
            class="mb-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition">
      {{ showAddConsoleForm ? 'Cancelar' : 'Agregar Consola' }}
    </button> -->

    <!-- Lista de Consolas -->
    <!-- <div *ngIf="consoles.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
      <div *ngFor="let console of consoles; let i = index" class="bg-white rounded-lg shadow-md p-4">
        <div class="mb-3">
          <img *ngIf="console.imageUrl" [src]="console.imageUrl" [alt]="console.name" class="w-full h-48 object-cover rounded">
          <div *ngIf="!console.imageUrl" class="w-full h-48 bg-gray-200 rounded flex items-center justify-center">
            <span class="text-gray-500">Sin imagen</span>
          </div>
        </div>
        <h3 class="font-semibold text-lg mb-2">{{ console.name }}</h3>
        <p class="text-gray-600 mb-2">{{ console.description || 'Sin descripción' }}</p>
        <p class="text-green-600 font-bold mb-2">{{ console.price | currency }}</p>
        <p class="text-sm mb-2">
          Stock: <span [class]="getStockClass(console.stock)">{{ console.stock }}</span>
        </p>
        
        <div class="flex space-x-2">
          <button (click)="startEditConsole(i)" class="px-3 py-1 bg-yellow-500 text-white rounded text-sm">
            Editar
          </button>
          <button (click)="deleteConsole(console, i)" class="px-3 py-1 bg-red-500 text-white rounded text-sm">
            Eliminar
          </button>
        </div>
      </div>
    </div>

    <div *ngIf="consoles.length === 0 && !isLoading" class="text-center py-8 text-gray-500">
      No hay consolas disponibles
    </div>
  </div> -->

  <!-- Sección de Accesorios -->
  <!-- <div class="mb-8">
    <h2 class="text-2xl font-bold mb-4">Accesorios</h2> -->
    
    <!-- Botón alternar formulario -->
    <!-- <button (click)="showAddAccessoryForm = !showAddAccessoryForm"
            class="mb-4 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition">
      {{ showAddAccessoryForm ? 'Cancelar' : 'Agregar Accesorio' }}
    </button> -->

    <!-- Lista de Accesorios -->
    <!-- <div *ngIf="accessories.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
      <div *ngFor="let accessory of accessories; let i = index" class="bg-white rounded-lg shadow-md p-4">
        <div class="mb-3">
          <img *ngIf="accessory.imageUrl" [src]="accessory.imageUrl" [alt]="accessory.name" class="w-full h-48 object-cover rounded">
          <div *ngIf="!accessory.imageUrl" class="w-full h-48 bg-gray-200 rounded flex items-center justify-center">
            <span class="text-gray-500">Sin imagen</span>
          </div>
        </div>
        <h3 class="font-semibold text-lg mb-2">{{ accessory.name }}</h3>
        <p class="text-gray-600 mb-2">{{ accessory.description || 'Sin descripción' }}</p>
        <p class="text-green-600 font-bold mb-2">{{ accessory.price | currency }}</p>
        <p class="text-sm mb-2">
          Stock: <span [class]="getStockClass(accessory.stock)">{{ accessory.stock }}</span>
        </p>
        <p class="text-sm text-gray-500 mb-3">Categoría: {{ accessory.category || 'N/A' }}</p>
        
        <div class="flex space-x-2">
          <button (click)="startEditAccessory(i)" class="px-3 py-1 bg-yellow-500 text-white rounded text-sm">
            Editar
          </button>
          <button (click)="deleteAccessory(accessory, i)" class="px-3 py-1 bg-red-500 text-white rounded text-sm">
            Eliminar
          </button>
        </div>
      </div>
    </div> -->

    <div *ngIf="accessories.length === 0 && !isLoading" class="text-center py-8 text-gray-500">
      No hay accesorios disponibles
    </div>
  </div>


